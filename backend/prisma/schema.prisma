generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mongodb"
    url      = env("DATABASE_URL")
}

model Project {
    id        String     @id @default(auto()) @map("_id") @db.ObjectId
    title     String
    details   String
    status    String     @default("Active")
    // Relations
    workItems WorkItem[]
    usersIDs  String[]   @db.ObjectId
    users     User[]     @relation(fields: [usersIDs], references: [id])
    // Timestamps
    createdAt DateTime   @default(now())
}

model WorkItem {
    id         String   @id @default(auto()) @map("_id") @db.ObjectId
    title      String
    details    String
    status     String
    type       String
    // Relations
    project    Project  @relation(fields: [projectId], references: [id])
    projectId  String   @db.ObjectId
    assignee   User     @relation(fields: [assigneeId], references: [id])
    assigneeId String   @db.ObjectId
    // Timestamps
    createdAt  DateTime @default(now())
}

model User {
    id            String          @id @default(auto()) @map("_id") @db.ObjectId
    email         String          @unique
    password      String
    name          String
    title         String
    roles         String[]
    // Relations
    workItems     WorkItem[]
    notifications Notifications[]
    projectIDs    String[]        @db.ObjectId
    projects      Project[]       @relation(fields: [projectIDs], references: [id])
    // Timestamps
    createdAt     DateTime        @default(now())
}

model Notifications {
    id        String   @id @default(auto()) @map("_id") @db.ObjectId
    seen      Boolean? @default(false)
    target    String
    type      String
    date      DateTime @default(now())
    title     String
    details   String
    user      User?    @relation(fields: [userId], references: [id])
    userId    String?  @db.ObjectId
    // Timestamps
    createdAt DateTime @default(now())
}
